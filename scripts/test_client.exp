tcl
Копировать
Редактировать
#!/usr/bin/expect -f

# Устанавливаем таймаут ожидания
set timeout 10

# Запускаем приложение (укажите корректный путь к JAR-файлу)
spawn java -jar target/SftpClient-1.0-SNAPSHOT.jar

# Ожидаем запрос ввода адреса SFTP-сервера и вводим "localhost"
expect "Введите адрес SFTP-сервера: "
send "localhost\r"

# Ожидаем запрос порта и вводим "22"
expect "Введите порт: "
send "22\r"

# Ожидаем запрос логина и вводим "user"
expect "Введите логин: "
send "user\r"

# Ожидаем запрос пароля и вводим "password"
expect "Введите пароль: "
send "password\r"

# Ожидаем появления меню
expect "Меню:"

# Выбираем пункт меню "1" для вывода списка доменов и IP
send "1\r"

# Ожидаем некоторое время для вывода списка (например, до символа '>' или конца строки)
expect {
    -re {.*->.*} { }
    timeout { puts "Timeout waiting for menu output" }
}

# Выбираем пункт меню "6" для выхода
send "6\r"

# Ожидаем завершения работы приложения
expect eof